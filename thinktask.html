<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>ThinkTask ‚Äî One-Click Demo</title>
<meta name="theme-color" content="#0E1626"/>
<style>
  :root{
    --bg-top:#0d1624; --bg-bot:#0a0e18;
    --card:#ffffff10; --line:#ffffff1a;
    --text:#fff; --muted:#ffffffb3;
    --accent:#1380EC; --green:#4CC38A; --red:#e5484d; --yellow:#ffd166;
    --shadow:0 28px 70px rgba(0,0,0,.45);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; color:var(--text);
    font-family:-apple-system, BlinkMacSystemFont, "SF Pro Text", Inter, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    background: radial-gradient(1200px 800px at 20% -10%, #122039 0%, transparent 60%),
                linear-gradient(180deg, var(--bg-top), var(--bg-bot));
  }
  .wrap{max-width:1120px;margin:0 auto;padding:24px}
  header{
    position:sticky; top:0; z-index:50;
    backdrop-filter:saturate(1.2) blur(10px);
    background:linear-gradient(180deg,#0d1624dd,#0d162400);
    border-bottom:1px solid #ffffff14;
  }
  .nav{display:flex;align-items:center;justify-content:space-between;gap:16px}
  .brand{display:flex;align-items:center;gap:10px;font-weight:800}
  .logo{
    width:28px;height:28px;border-radius:8px;
    background:radial-gradient(180px 140px at 20% 0%, #ff3b30, #ff453a 38%, #8b0d0d 90%);
    box-shadow:0 6px 22px rgba(255,59,48,.35), inset 0 0 0 2px #ffffff22; position:relative;
  }
  .logo:after{
    content:""; position:absolute; right:-3px; bottom:-3px; width:14px; height:14px; border-radius:999px;
    background:radial-gradient(circle at 30% 30%, #86f9b8, #22c55e);
    box-shadow:0 2px 10px rgba(34,197,94,.6), inset 0 0 0 2px #ffffff33;
  }
  nav a{color:var(--text); text-decoration:none; padding:10px 12px; border-radius:10px; opacity:.9}
  nav a:hover{background:#ffffff18}
  .cta{display:inline-flex;align-items:center;gap:10px;padding:12px 16px;border-radius:14px;
       background:linear-gradient(180deg,#2b8af5,#0f6ad4); border:1px solid #ffffff2a; box-shadow:var(--shadow); font-weight:700}
  .cta.ghost{background:#ffffff1e; border-color:#ffffff30; font-weight:600}
  .hero{padding:56px 0 26px; display:grid; gap:28px; grid-template-columns:1.1fr .9fr; align-items:center}
  @media (max-width:980px){ .hero{grid-template-columns:1fr} }
  h1{font-size:clamp(32px,5vw,56px); line-height:1.04; margin:8px 0 10px}
  p.lede{color:var(--muted); font-size:clamp(16px,2.6vw,19px); max-width:54ch}
  .hero-ctas{display:flex; gap:12px; flex-wrap:wrap; margin-top:14px}

  /* Phone preview */
  .device{
    width:min(400px, 88vw); height:720px; justify-self:end;
    border-radius:36px; background:linear-gradient(180deg,#0f1726,#0b101c);
    border:1px solid #ffffff1a; box-shadow:0 40px 140px rgba(0,0,0,.55), inset 0 0 0 2px #ffffff0e;
    padding:18px; position:relative; overflow:hidden;
  }
  @media (max-width:980px){ .device{justify-self:center; height:640px} }
  .notch{position:absolute; top:10px; left:50%; transform:translateX(-50%); width:160px; height:26px; background:#000; border-radius:18px}
  .screen{position:absolute; inset:18px; border-radius:26px; overflow:hidden; background:linear-gradient(180deg,#0e1523,#0a0e18); border:1px solid #ffffff12}
  .toolbar{position:absolute; top:0; left:0; right:0; height:56px; display:flex; align-items:center; justify-content:center;
           background:linear-gradient(180deg,#0e1528cc,#0e152800); border-bottom:1px solid #ffffff10; font-weight:700}
  .mic-zone{position:absolute; top:82px; left:0; right:0; height:260px; display:grid; place-items:center}
  .rings{position:relative; width:260px; height:260px}
  .ring,.ring2,.ring3{position:absolute; inset:0; margin:auto; border-radius:999px; border:1px solid #ffffff18;
                       animation:breath 1.2s ease-in-out infinite alternate}
  .ring{width:260px;height:260px}
  .ring2{width:200px;height:200px; opacity:.85; animation-delay:.05s}
  .ring3{width:140px;height:140px; opacity:.7; animation-delay:.1s}
  @keyframes breath{from{transform:scale(.96)} to{transform:scale(1.04)}}
  .pulse,.pulse2{
    position:absolute; width:118px; height:118px; border-radius:999px; border:3px solid rgba(255,59,48,.8);
    box-shadow:0 14px 34px rgba(255,59,48,.55); animation:pulseOut 1.0s ease-out infinite; display:none;
  }
  .pulse2{border-color:rgba(255,59,48,.55); animation-duration:1.6s}
  @keyframes pulseOut{0%{transform:scale(1);opacity:1}100%{transform:scale(1.4);opacity:0}}
  .mic-btn{
    position:absolute; inset:0; margin:auto; width:96px; height:96px; border-radius:999px;
    background:radial-gradient(circle at 50% 20%, #ff3b30, #c51119 70%);
    display:grid; place-items:center; color:#fff; font-size:34px; font-weight:900;
    box-shadow:0 22px 40px rgba(255,59,48,.5), inset 0 0 0 2px #ffffff2a; user-select:none;
  }
  .hint{position:absolute; top:24px; left:50%; transform:translateX(-50%); font-weight:800; font-size:28px}
  .subhint{position:absolute; top:64px; left:50%; transform:translateX(-50%); font-size:16px; opacity:.7}

  .panel{position:absolute; left:0; right:0; bottom:0; top:360px; padding:14px; display:flex; flex-direction:column; gap:10px}
  .editor{background:var(--card); border:1px solid var(--line); border-radius:14px; padding:10px; min-height:120px; max-height:180px; overflow:auto}
  textarea{width:100%; border:none; outline:none; resize:vertical; min-height:110px; background:transparent; color:var(--text); font:inherit}

  .row{display:flex; gap:10px; flex-wrap:wrap}
  .btn{display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:12px; background:#ffffff1e; border:1px solid #ffffff30; font-weight:600; cursor:pointer}
  .btn.primary{background:linear-gradient(180deg,#2b8af5,#0f6ad4)}
  .btn.green{background:linear-gradient(180deg,#4CC38A,#2aa76e)}
  .btn.red{background:#e5484d}
  .tag{display:inline-flex; align-items:center; gap:8px; padding:8px 10px; border-radius:999px; background:#ffffff18; border:1px solid #ffffff22}

  section{padding:40px 0; border-top:1px solid #ffffff12}
  .card{background:var(--card); border:1px solid var(--line); border-radius:16px; padding:18px; box-shadow:var(--shadow)}
  .muted{color:var(--muted)}

  .list{display:flex; flex-direction:column; gap:10px}
  .item{display:flex; gap:10px; align-items:flex-start; padding:12px; border-radius:12px; background:#ffffff12; border:1px solid #ffffff22; position:relative}
  .item input[type="checkbox"]{transform:translateY(2px)}
  .item.checked div[contenteditable]{text-decoration:line-through; opacity:.75}
  progress{width:100%; height:10px; -webkit-appearance:none; appearance:none}
  progress::-webkit-progress-bar{background:#ffffff18;border-radius:8px}
  progress::-webkit-progress-value{background:linear-gradient(90deg,#2b8af5,#4CC38A); border-radius:8px}

  .toast{position:fixed; left:50%; bottom:22px; transform:translateX(-50%);
         background:#000000d0; color:#fff; padding:12px 16px; border-radius:12px; border:1px solid #ffffff20; display:none; z-index:80}
</style>
</head>
<body>
<header>
  <div class="wrap nav">
    <div class="brand"><div class="logo"></div><span>ThinkTask</span><span class="tag">One-click demo</span></div>
    <nav>
      <a href="#demo">Live Demo</a>
      <a href="#" id="runDemoTop">‚ñ∂ Run Demo</a>
    </nav>
  </div>
</header>

<main class="wrap">
  <section class="hero" id="top">
    <div>
      <h1>Turn talk into action.</h1>
      <p class="lede">Press <b>Run Demo</b> ‚Äî we‚Äôll simulate recording, fill the transcript, generate a plan, then check tasks one by one to completion.</p>
      <div class="hero-ctas">
        <a class="cta" href="#" id="runDemoBtn">‚ñ∂ Run Demo</a>
        <a class="cta ghost" href="#demo">Open Live Area</a>
      </div>
    </div>

    <!-- Phone preview -->
    <div class="device" aria-label="ThinkTask preview">
      <div class="notch"></div>
      <div class="screen">
        <div class="toolbar">ThinkTask</div>
        <div class="mic-zone">
          <div class="hint" id="hintText">Tap to record</div>
          <div class="subhint" id="subHintText">your game plan</div>

          <div class="rings">
            <div class="ring"></div><div class="ring2"></div><div class="ring3"></div>
            <div class="pulse" id="pulseA"></div>
            <div class="pulse2" id="pulseB"></div>
            <div class="mic-btn" id="micBtn" title="Mic">üéôÔ∏è</div>
          </div>
        </div>

        <div class="panel">
          <div class="editor"><textarea id="transcript" placeholder="Your transcript will appear here‚Ä¶"></textarea></div>
          <div class="row">
            <button class="btn" id="copyBtn">üìÑ Copy</button>
            <button class="btn primary" id="goBtn">‚úÖ Go!</button>
            <button class="btn" id="clearBtn">üßπ Clear</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="demo">
    <div class="card">
      <h2 style="margin:0 0 8px">Draft & Checklist</h2>
      <p class="muted" style="margin:0 0 12px">This mirrors the in-app flow: title, summary, checklist with progress, and completion celebration.</p>
      <div class="row" style="gap:8px;align-items:center">
        <input id="title" placeholder="Plan title" style="flex:1;padding:10px;border-radius:12px;border:1px solid var(--line);background:transparent;color:var(--text)"/>
        <span class="tag" id="progressTag">0%</span>
      </div>
      <div style="margin-top:10px">
        <textarea id="summary" placeholder="2‚Äì3 sentence summary" style="width:100%;min-height:80px;border-radius:12px;border:1px solid var(--line);background:transparent;color:var(--text);padding:10px"></textarea>
      </div>
      <div style="margin-top:12px"><progress id="progress" value="0" max="1"></progress></div>
      <div class="list" id="taskList" style="margin-top:12px"></div>

      <div class="row" style="margin-top:12px">
        <button class="btn" id="addItemBtn">‚ûï Add item</button>
        <button class="btn green" id="savePlanBtn">üíæ Save Plan (local)</button>
        <button class="btn red" id="resetDemoBtn">‚Ü∫ Reset Demo</button>
      </div>
      <p class="muted" style="margin-top:8px">Local save uses <code>localStorage</code> (no server).</p>
    </div>
  </section>
</main>

<div class="toast" id="toast">Done</div>

<script>
/* ---------- tiny helpers ---------- */
const qs=s=>document.querySelector(s);
const el={
  pulseA:qs('#pulseA'), pulseB:qs('#pulseB'),
  hint:qs('#hintText'), sub:qs('#subHintText'),
  transcript:qs('#transcript'), micBtn:qs('#micBtn'),
  copyBtn:qs('#copyBtn'), goBtn:qs('#goBtn'), clearBtn:qs('#clearBtn'),
  title:qs('#title'), summary:qs('#summary'),
  taskList:qs('#taskList'), progress:qs('#progress'), progressTag:qs('#progressTag'),
  addItemBtn:qs('#addItemBtn'), savePlanBtn:qs('#savePlanBtn'),
  runDemoBtn:qs('#runDemoBtn'), runDemoTop:qs('#runDemoTop'), resetDemoBtn:qs('#resetDemoBtn'),
  toast:qs('#toast')
};
const showToast=(t='Done')=>{ el.toast.textContent=t; el.toast.style.display='block'; clearTimeout(showToast._t); showToast._t=setTimeout(()=>el.toast.style.display='none',1100); };
const sleep = ms => new Promise(r=>setTimeout(r,ms));

/* ---------- mic visuals (fake) ---------- */
let demoMode=false, demoTimers=[];
function micVisuals(on){
  el.pulseA.style.display = on?'block':'none';
  el.pulseB.style.display = on?'block':'none';
  el.hint.textContent = on ? 'Listening‚Ä¶' : 'Tap to record';
  el.sub.textContent = 'your game plan';
}

/* ---------- checklist rendering ---------- */
function addTaskItem(text='New task'){
  const id = crypto.randomUUID();
  const row = document.createElement('div'); row.className='item'; row.dataset.id=id;
  const cb = document.createElement('input'); cb.type='checkbox';
  const content = document.createElement('div'); content.contentEditable='true'; content.style.flex='1'; content.textContent=text;
  cb.onchange = ()=>{ row.classList.toggle('checked', cb.checked); updateProgress(); };
  const del = document.createElement('button'); del.className='btn red'; del.textContent='Delete'; del.onclick=()=>{ row.remove(); updateProgress(); };
  row.append(cb, content, del); el.taskList.appendChild(row);
}
function updateProgress(){
  const items = [...el.taskList.querySelectorAll('.item')];
  const total = items.length || 1;
  const done = items.filter(row=> row.querySelector('input').checked).length;
  const ratio = done/total;
  el.progress.value = ratio;
  el.progressTag.textContent = Math.round(ratio*100)+'%';
  if(ratio===1 && items.length>0) confetti();
}

/* ---------- local save (no server) ---------- */
function savePlanLocal(){
  const data = {
    id: crypto.randomUUID(),
    date: new Date().toISOString(),
    title: (el.title.value||'Game Plan').trim(),
    summary: el.summary.value.trim(),
    items: [...el.taskList.querySelectorAll('.item')].map(row=>({
      text: row.querySelector('div[contenteditable]').textContent.trim(),
      done: row.querySelector('input').checked
    }))
  };
  const key='thinktask.demo.plans';
  const list = JSON.parse(localStorage.getItem(key)||'[]');
  list.unshift(data);
  localStorage.setItem(key, JSON.stringify(list));
  showToast('Saved locally');
}

/* ---------- plan generation ---------- */
function localPlanFromTranscript(text){
  // Minimal heuristic; for the demo we‚Äôll override with a curated plan
  const sentences = text.split(/[.;!?]+/).map(s=>s.trim()).filter(Boolean);
  const items = sentences.flatMap(s=>{
    if(/maths/i.test(s) && /english/i.test(s) && /science/i.test(s)){
      return ['Do maths homework','Do English homework','Do science homework'];
    }
    if(/walk the dog/i.test(s)) return ['Walk the dog'];
    return [];
  });
  return {
    title: 'Homework + Dog Walk',
    summary: 'Prioritise maths first, then English and science, then finish with a dog walk.',
    items: items.length ? items : ['Do maths homework','Do English homework','Do science homework','Walk the dog']
  };
}
function renderDraft(draft){
  el.title.value = draft.title || 'Game Plan';
  el.summary.value = draft.summary || '';
  el.taskList.innerHTML = '';
  (draft.items||[]).forEach(addTaskItem);
  updateProgress();
}

/* ---------- demo choreography ---------- */
const DEMO_TEXT = "i need to do my homework, maths first then english and science after, then i need tgo walk the dog";
async function runForcedDemo(){
  // cancel any previous demo timers
  demoTimers.forEach(t=>clearTimeout(t)); demoTimers=[];
  demoMode=true;

  // reset UI
  el.transcript.value=''; el.title.value=''; el.summary.value=''; el.taskList.innerHTML=''; updateProgress();
  window.scrollTo({top: document.querySelector('#top').offsetTop - 6, behavior:'smooth'});

  // 1) pretend to record
  micVisuals(true);

  // 2) type out transcript
  await typeOut(DEMO_TEXT, el.transcript, 28);

  // small hold, then stop "recording"
  await sleep(400);
  micVisuals(false);

  // 3) generate plan (curated)
  const draft = localPlanFromTranscript(DEMO_TEXT);
  renderDraft(draft);

  // 4) check tasks one-by-one
  await animateCheckoff();
}
async function typeOut(text, textarea, speedMs=24){
  textarea.value='';
  for(let i=0;i<text.length;i++){
    textarea.value += text[i];
    textarea.scrollTop = textarea.scrollHeight;
    await sleep(speedMs);
  }
}
async function animateCheckoff(){
  const rows = [...el.taskList.querySelectorAll('.item')];
  for(let i=0;i<rows.length;i++){
    const row = rows[i];
    await sleep(900);
    row.querySelector('input').checked = true;
    row.classList.add('checked');
    updateProgress();
  }
}

/* ---------- confetti (mini canvas) ---------- */
function confetti(count=160, duration=1400){
  const c=document.createElement('canvas'); Object.assign(c.style,{position:'fixed',inset:'0',width:'100vw',height:'100vh',pointerEvents:'none',zIndex:90});
  document.body.appendChild(c); const ctx=c.getContext('2d');
  const px=c.width=innerWidth*devicePixelRatio, py=c.height=innerHeight*devicePixelRatio;
  const colors=['#ff3b30','#1380EC','#ffd166','#4CC38A','#a78bfa','#ffffff'];
  const pieces=Array.from({length:count},()=>({x:Math.random()*px,y:-Math.random()*py*.2,r:3+Math.random()*6,vx:-1+Math.random()*2,vy:2+Math.random()*4,a:Math.random()*Math.PI*2}));
  let t0=performance.now();
  function tick(t){
    const dt=t-t0; t0=t; ctx.clearRect(0,0,px,py);
    pieces.forEach(p=>{ p.x+=p.vx*(dt/16); p.y+=p.vy*(dt/16); p.a+=.04;
      ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(Math.sin(p.a));
      ctx.fillStyle=colors[(p.r|0)%colors.length]; ctx.fillRect(-p.r,-p.r,p.r*2,p.r*2); ctx.restore();
    });
    if(t-(tick.start||(tick.start=t))<duration) requestAnimationFrame(tick); else c.remove();
  }
  requestAnimationFrame(tick);
}

/* ---------- wire up ---------- */
el.copyBtn.onclick = ()=>{ navigator.clipboard.writeText(el.transcript.value||'').then(()=>showToast('Copied')); };
el.clearBtn.onclick = ()=>{ el.transcript.value=''; showToast('Cleared'); };
el.goBtn.onclick = ()=>{ const d = localPlanFromTranscript(el.transcript.value||''); renderDraft(d); };
el.addItemBtn.onclick = ()=> addTaskItem('New task');
el.savePlanBtn.onclick = savePlanLocal;
el.resetDemoBtn.onclick = ()=>{
  demoTimers.forEach(t=>clearTimeout(t)); demoTimers=[];
  el.transcript.value=''; el.title.value=''; el.summary.value=''; el.taskList.innerHTML=''; updateProgress();
  micVisuals(false); showToast('Reset');
};
el.runDemoBtn.onclick = (e)=>{ e.preventDefault(); runForcedDemo(); };
el.runDemoTop.onclick = (e)=>{ e.preventDefault(); runForcedDemo(); };

// Mic button just toggles fake visuals (since this is a forced demo)
el.micBtn.onclick = ()=>{
  const on = el.pulseA.style.display!=='block';
  micVisuals(on);
};

</script>
</body>
</html>

